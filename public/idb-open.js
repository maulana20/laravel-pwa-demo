const objtb=idb.open("laravel-pwa-demo",1,(t=>{t.objectStoreNames.contains("product")||t.createObjectStore("product")}));class idbTable{constructor(t){this.table_name=t}getAll(){return objtb.then((t=>t.transaction(this.table_name).objectStore(this.table_name).getAll()))}set(t,e){return objtb.then((o=>{const n=o.transaction(this.table_name,"readwrite");return n.objectStore(this.table_name).put(e,t),n.complete}))}delete(t){return objtb.then((e=>{const o=e.transaction(this.table_name,"readwrite");return o.objectStore(this.table_name).delete(t),o.complete}))}}const saveProduct=function(t){console.log("processing id "+t.id);var e=JSON.stringify({id:t.id,name:t.name,category:t.category});fetch("/api/product",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:e}).then((function(e){e.text().then((function(e){(e=JSON.parse(e))&&1==e.success&&(console.log("deleting id "+t.id),new idbTable("product").delete(t.id))}))})).catch((function(t){console.log("error "+t)}))};
